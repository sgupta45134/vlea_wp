!function(e,t,o){e.ImageZoom=function(o,i){var s=this;function n(e){var t=parseInt(e);return t=isNaN(t)?0:t}s.$el=e(o),s.$el.data("imagezoom",s),s.init=function(t){s.options=e.extend({},e.ImageZoom.defaults,t),s.$viewer=e('<div class="zm-viewer '+s.options.zoomViewerClass+'"></div>').appendTo("body"),s.$handler=e('<div class="zm-handler'+s.options.zoomHandlerClass+'"></div>').appendTo("body"),s.isBigImageReady=-1,s.$largeImg=null,s.isActive=!1,s.$handlerArea=null,s.isWebkit=/chrome/.test(navigator.userAgent.toLowerCase())||/safari/.test(navigator.userAgent.toLowerCase()),s.evt={x:-1,y:-1},s.options.bigImageSrc=""==s.options.bigImageSrc?s.$el.attr("src"):s.options.bigImageSrc,(new Image).src=s.options.bigImageSrc,s.callIndex=e.ImageZoom._calltimes+1,s.animateTimer=null,e.ImageZoom._calltimes+=1,e(document).bind("mousemove.imagezoom"+s.callIndex,(function(e){s.isActive&&s.moveHandler(e.pageX,e.pageY)})),s.$el.bind("mouseover.imagezoom",(function(e){s.isActive=!0,s.showViewer(e)}))},s.moveHandler=function(e,o){var i=s.$el.offset(),a=s.$el.outerWidth(!1),r=s.$el.outerHeight(!1);if(e>=i.left&&e<=i.left+a&&o>=i.top&&o<=i.top+r){if(i.left=i.left+n(s.$el.css("borderLeftWidth"))+n(s.$el.css("paddingLeft")),i.top=i.top+n(s.$el.css("borderTopWidth"))+n(s.$el.css("paddingTop")),a=s.$el.width(),r=s.$el.height(),e>=i.left&&e<=i.left+a&&o>=i.top&&o<=i.top+r&&(s.evt={x:e,y:o},"follow"==s.options.type&&s.$viewer.css({top:o-s.$viewer.outerHeight(!1)/2,left:e-s.$viewer.outerWidth(!1)/2}),1==s.isBigImageReady)){var l,h,d=o-i.top,p=e-i.left;if("inner"==s.options.type)l=-s.$largeImg.height()*d/r+d,h=-s.$largeImg.width()*p/a+p;else if("standard"==s.options.type){var m=p-s.$handlerArea.width()/2,g=d-s.$handlerArea.height()/2,f=s.$handlerArea.width(),c=s.$handlerArea.height();m<0?m=0:m>a-f&&(m=a-f),g<0?g=0:g>r-c&&(g=r-c),h=-m/s.scale,l=-g/s.scale,s.isWebkit?(s.$handlerArea.css({opacity:.99}),setTimeout((function(){s.$handlerArea.css({top:g,left:m,opacity:1})}),0)):s.$handlerArea.css({top:g,left:m})}else"follow"==s.options.type&&(l=-s.$largeImg.height()/r*d+s.options.zoomSize[1]/2,h=-s.$largeImg.width()/a*p+s.options.zoomSize[0]/2,-l>s.$largeImg.height()-s.options.zoomSize[1]?l=-(s.$largeImg.height()-s.options.zoomSize[1]):l>0&&(l=0),-h>s.$largeImg.width()-s.options.zoomSize[0]?h=-(s.$largeImg.width()-s.options.zoomSize[0]):h>0&&(h=0));s.options.smoothMove?(t.clearTimeout(s.animateTimer),s.smoothMove(h,l)):s.$viewer.find("img").css({top:l,left:h})}}else s.isActive=!1,s.$viewer.hide(),s.$handler.hide(),s.options.onHide(s),t.clearTimeout(s.animateTimer),s.animateTimer=null},s.showViewer=function(o){var i=s.$el.offset().top,a=n(s.$el.css("borderTopWidth")),r=n(s.$el.css("paddingTop")),l=s.$el.offset().left,h=n(s.$el.css("borderLeftWidth")),d=n(s.$el.css("paddingLeft"));i=i+a+r,l=l+h+d;var p=s.$el.width(),m=s.$el.height();if(s.isBigImageReady<1&&e("div",s.$viewer).remove(),"inner"==s.options.type)s.$viewer.css({top:i,left:l,width:p,height:m}).show();else if("standard"==s.options.type){var g,f,c=""==s.options.alignTo?s.$el:e("#"+s.options.alignTo);if(t.innerWidth<768)"left"==s.options.position?(g=l+h+d,f=c.offset().top-c.height()/2):"right"==s.options.position&&(g=l+h+d,f=c.offset().top-c.height()),s.$viewer.css({top:f,left:g,width:c.width(),height:s.options.zoomSize[1]/2}).show(),s.$handlerArea&&(s.scale=p/s.$largeImg.width(),s.$handlerArea.css({width:s.$viewer.width()*s.scale,height:s.$viewer.height()*s.scale}));else{if("left"==s.options.position)c.offset().left<c.width()/2?(g=l+h+c.width()+c.offset().left,f=c.offset().top+s.options.offset[1]):(g=c.offset().left-s.options.zoomSize[0]-s.options.offset[0],f=c.offset().top+s.options.offset[1]);else if("right"==s.options.position){t.innerWidth-(c.offset().left+c.width())<c.width()/2?(g=c.offset().left-s.options.zoomSize[0]-s.options.offset[0],f=c.offset().top+s.options.offset[1]):(g=c.offset().left+c.width()+s.options.offset[0],f=c.offset().top+s.options.offset[1])}s.$viewer.css({top:f,left:g,width:s.options.zoomSize[0],height:s.options.zoomSize[1]}).show(),s.$handlerArea&&(s.scale=p/s.$largeImg.width(),s.$handlerArea.css({width:s.$viewer.width()*s.scale,height:s.$viewer.height()*s.scale}))}}else"follow"==s.options.type&&s.$viewer.css({width:s.options.zoomSize[0],height:s.options.zoomSize[1],top:o.pageY-s.options.zoomSize[1]/2,left:o.pageX-s.options.zoomSize[0]/2}).show();s.$handler.css({top:i,left:l,width:p,height:m}).show(),s.options.onShow(s),-1==s.isBigImageReady&&(s.isBigImageReady=0,fastImg(s.options.bigImageSrc,(function(){if(e.trim(e(this).attr("src"))==e.trim(s.options.bigImageSrc)){if(s.$viewer.append('<img src="'+s.$el.attr("src")+'" class="zm-fast" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),s.isBigImageReady=1,s.$largeImg=e('<img src="'+s.options.bigImageSrc+'" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),s.$viewer.append(s.$largeImg),"standard"==s.options.type){var t=p/this.width;s.$handlerArea=e('<div class="zm-handlerarea" style="width:'+s.$viewer.width()*t+"px;height:"+s.$viewer.height()*t+'px"></div>').appendTo(s.$handler),s.scale=t}-1==s.evt.x&&-1==s.evt.y?s.moveHandler(o.pageX,o.pageY):s.moveHandler(s.evt.x,s.evt.y),s.options.showDescription&&s.$el.attr("alt")&&""!=e.trim(s.$el.attr("alt"))&&s.$viewer.append('<div class="'+s.options.descriptionClass+'">'+s.$el.attr("alt")+"</div>")}}),(function(){}),(function(){})))},s.changeImage=function(e,t){this.$el.attr("src",e),this.isBigImageReady=-1,this.options.bigImageSrc="string"==typeof t?t:e,s.options.preload&&((new Image).src=this.options.bigImageSrc),this.$viewer.hide().empty(),this.$handler.hide().empty(),this.$handlerArea=null},s.changeZoomSize=function(e,t){s.options.zoomSize=[e,t]},s.destroy=function(){e(document).unbind("mousemove.imagezoom"+s.callIndex),this.$el.unbind(".imagezoom"),this.$viewer.remove(),this.$handler.remove(),this.$el.removeData("imagezoom")},s.smoothMove=function(e,o){var i=parseInt(s.$largeImg.css("top"));i=isNaN(i)?0:i;var n=parseInt(s.$largeImg.css("left"));if(n=isNaN(n)?0:n,o=parseInt(o),e=parseInt(e),i==o&&n==e)return t.clearTimeout(s.animateTimer),void(s.animateTimer=null);var a=o-i,r=e-n,l=i+a/Math.abs(a)*Math.ceil(Math.abs(a/10)),h=n+r/Math.abs(r)*Math.ceil(Math.abs(r/10));s.$viewer.find("img").css({top:l,left:h}),s.animateTimer=setTimeout((function(){s.smoothMove(e,o)}),10)},s.init(i)},e.ImageZoom.defaults={bigImageSrc:"",preload:!0,type:"inner",smoothMove:!0,position:"right",offset:[10,0],alignTo:"",zoomSize:[100,100],descriptionClass:"zm-description",zoomViewerClass:"",zoomHandlerClass:"",showDescription:!0,onShow:function(e){},onHide:function(e){}},e.ImageZoom._calltimes=0,e.fn.ImageZoom=function(t){return this.each((function(){new e.ImageZoom(this,t)}))}}(jQuery,window);var fastImg=function(){var e=[],t=null,o=function(){for(var t=0;t<e.length;t++)e[t].end?e.splice(t--,1):e[t]();!e.length&&i()},i=function(){clearInterval(t),t=null};return function(i,s,n,a){var r,l,h,d,p,m=new Image;if(m.src=i,m.complete)return s.call(m),void(n&&n.call(m));l=m.width,h=m.height,m.onerror=function(){a&&a.call(m),r.end=!0,m=m.onload=m.onerror=null},(r=function(){d=m.width,p=m.height,(d!==l||p!==h||d*p>1024)&&(s.call(m),r.end=!0)})(),m.onload=function(){!r.end&&r(),n&&n.call(m),m=m.onload=m.onerror=null},r.end||(e.push(r),null===t&&(t=setInterval(o,40)))}}();