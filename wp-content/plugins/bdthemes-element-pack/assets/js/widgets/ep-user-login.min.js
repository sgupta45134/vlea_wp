!function(a,e){"use strict";window.is_fb_loggedin=!1,window.is_google_loggedin=!1;var s=function(i){var o=i.find(".redirect_after_login").val();a.ajax({type:"POST",dataType:"json",url:element_pack_ajax_login_config.ajaxurl,data:i.serialize(),beforeSend:function(e){bdtUIkit.notification({message:"<div bdt-spinner></div> "+element_pack_ajax_login_config.loadingmessage,timeout:!1})},success:function(e){var n=i.find(".element-pack-google-recaptcha");if(0<n.length){var t=n.attr("data-widgetid");grecaptcha.reset(t),grecaptcha.execute(t)}1==e.loggedin?(bdtUIkit.notification.closeAll(),bdtUIkit.notification({message:"<span bdt-icon='icon: check'></span> "+e.message,status:"primary"}),document.location.href=o):(bdtUIkit.notification.closeAll(),bdtUIkit.notification({message:"<div class=\"bdt-flex\"><span bdt-icon='icon: warning'></span><span>"+e.message+"</span></div>",status:"warning"}))},error:function(e){bdtUIkit.notification.closeAll(),bdtUIkit.notification({message:"<span bdt-icon='icon: warning'></span>"+element_pack_ajax_login_config.unknownerror,status:"warning"})}})},r=function(e){var o=e.find(".redirect_after_login").val();FB.api("/me",{fields:"id, name, first_name, last_name, email, link, gender, locale, picture"},function(e){var n=FB.getAuthResponse().userID,t=FB.getAuthResponse().accessToken;window.is_fb_loggedin=!0;var i={id:e.id,name:e.name,first_name:e.first_name,last_name:e.last_name,email:e.email,link:e.link};a.ajax({url:window.ElementPackConfig.ajaxurl,method:"post",data:{action:"element_pack_social_facebook_login",data:i,method:"post",dataType:"json",userID:n,security_string:t},dataType:"json",beforeSend:function(e){bdtUIkit.notification({message:"<div bdt-spinner></div> "+element_pack_ajax_login_config.loadingmessage,timeout:!1})},success:function(e){!0===e.success?void 0===o?location.reload():window.location=o:location.reload()},complete:function(e,n){bdtUIkit.notification.closeAll()}})})},n=function(){var t,e=a(".element-pack-google-recaptcha");0<e.length&&e.each(function(){var n=a(this),e=n.attr("data-widgetid");void 0!==e&&!1!==e||(t=grecaptcha.render(a(this).attr("id"),{sitekey:n.data("sitekey"),callback:function(e){""!==e&&n.append(jQuery("<input>",{type:"hidden",value:e,class:"g-recaptcha-response"}))}}),n.attr("data-widgetid",t))})};window.onLoadElementorPackReCaptcha=n;var t=function(e,i){var n=e.find(".bdt-user-login"),t=e.find("form.bdt-user-login-form"),o=e.find(".element-pack-google-recaptcha"),a=n.find(".fb_btn_link"),d=n.find("#google_btn_link"),c=n.find(".redirect_after_login").val();if(0<t.length&&t.on("submit",function(e){e.preventDefault(),s(t)}),elementorFrontend.isEditMode()&&void 0===o.attr("data-widgetid")&&onLoadElementorPackReCaptcha(),0<o.length&&grecaptcha.ready(function(){var e=o.attr("data-widgetid");grecaptcha.execute(e)}),0<a.length&&a.on("click",function(){is_fb_loggedin||FB.login(function(e){e.authResponse&&r(n)},{scope:"email"})}),0<d.length){var l=d.data("clientid");gapi.load("auth2",function(){gapi.auth2.init({client_id:l,cookiepolicy:"single_host_origin"}).attachClickHandler("google_btn_link",{},function(e){var n=e.getBasicProfile();n.getName(),n.getEmail();if(window.is_google_loggedin){var t=e.getAuthResponse().id_token;i.ajax({url:window.ElementPackConfig.ajaxurl,method:"post",data:{action:"element_pack_social_google_login",id_token:t},dataType:"json",beforeSend:function(e){bdtUIkit.notification({message:"<div bdt-spinner></div> "+element_pack_ajax_login_config.loadingmessage,timeout:!1})},success:function(e){!0===e.success&&(void 0===c?location.reload():window.location=c)},complete:function(e,n){bdtUIkit.notification.closeAll()}})}},function(e){})}),d.on("click",function(){window.is_google_loggedin=!0})}};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/bdt-user-login.default",t),elementorFrontend.hooks.addAction("frontend/element_ready/bdt-user-login.bdt-dropdown",t),elementorFrontend.hooks.addAction("frontend/element_ready/bdt-user-login.bdt-modal",t)})}(jQuery,window.elementorFrontend);